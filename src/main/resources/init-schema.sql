CREATE TABLE IF NOT EXISTS t_user
(
    id         INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    username   VARCHAR(255) NOT NULL UNIQUE,
    password   VARCHAR(255) NOT NULL,
    email      VARCHAR(255),
    created_at TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE IF NOT EXISTS t_permission_object
(
    id              BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    permission_code VARCHAR(255) NOT NULL UNIQUE,
    permission_name VARCHAR(255) NOT NULL,
    created_at      TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at      TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS t_permission_rule
(
    id                   BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    permission_object_id BIGINT       NOT NULL,
    permission_dimension VARCHAR(30)  NOT NULL,
    permission_condition VARCHAR(10)  NOT NULL DEFAULT '=',
    group_no             INT          NOT NULL default 1,
    permission_logic     VARCHAR(10)  NOT NULL DEFAULT 'and',
    created_at           TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at           TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE IF NOT EXISTS t_permission_rule_data
(
    id                   BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    permission_rule_id BIGINT       NOT NULL,
    property_type VARCHAR(30)  NOT NULL DEFAULT 'string',
    property_value VARCHAR(10)  NOT NULL,
    created_at           TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at           TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);